(function(e){function t(t){for(var o,r,i=t[0],s=t[1],c=t[2],d=0,f=[];d<i.length;d++)r=i[d],a[r]&&f.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(f.length)f.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],o=!0,r=1;r<n.length;r++){var i=n[r];0!==a[i]&&(o=!1)}o&&(u.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},a={app:0},u=[];function i(e){return s.p+"js/"+({about:"about","home~users":"home~users",home:"home",users:"users",login:"login"}[e]||e)+"."+{about:"aa5a125f","home~users":"3997ed95",home:"4d1cc29b",users:"1a23e820",login:"86b9f693"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={home:1,users:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="css/"+({about:"about","home~users":"home~users",home:"home",users:"users",login:"login"}[e]||e)+"."+{about:"31d6cfe0","home~users":"31d6cfe0",home:"46e32503",users:"eff7198d",login:"31d6cfe0"}[e]+".css",a=s.p+o,u=document.getElementsByTagName("link"),i=0;i<u.length;i++){var c=u[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===a))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){c=f[i],d=c.getAttribute("data-href");if(d===o||d===a)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var o=t&&t.target&&t.target.src||a,u=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=o,delete r[e],l.parentNode.removeChild(l),n(u)},l.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(l)}).then(function(){r[e]=0}));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var u=new Promise(function(t,n){o=a[e]=[t,n]});t.push(o[2]=u);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e),c=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,u=new Error("Loading chunk "+e+" failed.\n("+o+": "+r+")");u.type=o,u.request=r,n[1](u)}a[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-cli/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var f=0;f<c.length;f++)t(c[f]);var l=d;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"23be":function(e,t,n){"use strict";n.r(t);var o=n("49d7"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=r.a},"3dfd":function(e,t,n){"use strict";n.r(t);var o=n("df3d"),r=n("23be");for(var a in r)"default"!==a&&function(e){n.d(t,e,function(){return r[e]})}(a);var u=n("2877"),i=n("6544"),s=n.n(i),c=n("bb71"),d=Object(u["a"])(r["default"],o["a"],o["b"],!1,null,null,null);t["default"]=d.exports,s()(d,{VApp:c["VApp"],VContent:c["VContent"]})},"402c":function(e,t,n){"use strict";var o=a(n("2b0e")),r=a(n("bb71"));function a(e){return e&&e.__esModule?e:{default:e}}n("da64"),o.default.use(r.default,{iconfont:"md"})},"41cb":function(e,t,n){"use strict";n("d3b7"),n("e6cf"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n("2b0e")),r=u(n("8c4f")),a=u(n("8aa5"));function u(e){return e&&e.__esModule?e:{default:e}}o.default.use(r.default);var i=new r.default({mode:"history",base:"/vue-cli/",routes:[{path:"/",name:"login",component:function(){return n.e("login").then(n.bind(null,"a55b"))},meta:{requiresGuest:!0}},{path:"/home",name:"home",component:function(){return Promise.all([n.e("home~users"),n.e("home")]).then(n.bind(null,"bb51"))}},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/users",name:"users",component:function(){return Promise.all([n.e("home~users"),n.e("users")]).then(n.bind(null,"ed81"))}},{path:"/pgv",name:"pgv",component:function(){return Promise.all([n.e("home~users"),n.e("users")]).then(n.bind(null,"0ae6"))},meta:{requiresAuth:!0}},{path:"/three",name:"three",component:function(){return Promise.all([n.e("home~users"),n.e("users")]).then(n.bind(null,"f5c9"))},meta:{requiresAuth:!1}},{path:"/ggd",name:"ggd",component:function(){return Promise.all([n.e("home~users"),n.e("users")]).then(n.bind(null,"13e2"))},meta:{requiresAuth:!1}},{path:"/relay",name:"relay",component:function(){return Promise.all([n.e("home~users"),n.e("users")]).then(n.bind(null,"69e4"))},meta:{requiresAuth:!1}}]});i.beforeEach(function(e,t,n){console.log(e),e.matched.some(function(e){return e.meta.requiresAuth})?a.default.auth().currentUser?n():n({path:"/",query:{redirect:e.fullPath}}):e.matched.some(function(e){return e.meta.requiresGuest})&&a.default.auth().currentUser?n({path:"/pgv",query:{redirect:e.fullPath}}):n()});var s=i;t.default=s},"47e3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_USER=t.SET_MY_HISTORY=t.CLOSE_DIALOG=t.FETCH_HISTORY=t.RESET_SELECTED_SEAT=t.REMOVE_SEAT=t.ADD_SELECTED_SEAT=t.SET_SEAT_LIST=t.SET_MOVIE_ID=t.SET_MOVIE_NAME=t.SET_THEATRE=t.SET_DATE=t.SET_MOVIE=t.SET_MODE=t.GET_LIST=t.CTRL_STATUS=t.ADD_MODE=t.EDIT_MODE=t.DELETE_TODO=t.ADD_TODO=t.EDIT_TODO=void 0;var o="EDIT_TODO";t.EDIT_TODO=o;var r="ADD_TODO";t.ADD_TODO=r;var a="DELETE_TODO";t.DELETE_TODO=a;var u="EDIT_MODE";t.EDIT_MODE=u;var i="ADD_MODE";t.ADD_MODE=i;var s="CTRL_STATUS";t.CTRL_STATUS=s;var c="GET_LIST";t.GET_LIST=c;var d="SET_MODE";t.SET_MODE=d;var f="SET_MOVIE";t.SET_MOVIE=f;var l="SET_DATE";t.SET_DATE=l;var p="SET_THEATRE";t.SET_THEATRE=p;var v="SET_MOVIE_NAME";t.SET_MOVIE_NAME=v;var m="SET_MOVIE_ID";t.SET_MOVIE_ID=m;var E="SET_SEAT_LIST";t.SET_SEAT_LIST=E;var T="ADD_SELECTED_SEAT";t.ADD_SELECTED_SEAT=T;var h="REMOVE_SEAT";t.REMOVE_SEAT=h;var _="RESET_SELECTED_SEAT";t.RESET_SELECTED_SEAT=_;var S="FETCH_HISTORY";t.FETCH_HISTORY=S;var g="CLOSE_DIALOG";t.CLOSE_DIALOG=g;var O="SET_MY_HISTORY";t.SET_MY_HISTORY=O;var D="SET_USER";t.SET_USER=D},"49d7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"App",components:{},data:function(){return{}}};t.default=o},"56d7":function(e,t,n){"use strict";n("6d93");var o=c(n("2b0e"));n("402c");var r,a=c(n("3dfd")),u=c(n("41cb")),i=c(n("c0d6")),s=c(n("8aa5"));function c(e){return e&&e.__esModule?e:{default:e}}o.default.config.productionTip=!1,s.default.auth().onAuthStateChanged(function(e){r||(r=new o.default({router:u.default,store:i.default,render:function(e){return e(a.default)}}).$mount("#app"))})},"694e":function(e,t,n){"use strict";n("4de4"),n("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,a=n("47e3"),u=i(n("bc3a"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={state:{todoList:[],editIdx:-1,editMemo:""},getters:{},mutation:(o={},s(o,a.GET_LIST,function(e,t){e.todoList=t}),s(o,a.ADD_TODO,function(e,t){e.todoList.push({memo:t,status:"created"})}),s(o,a.EDIT_TODO,function(e,t){e.todoList[t.id].memo=t.memo}),s(o,a.DELETE_TODO,function(e,t){e.todoList.splice(t,1)}),s(o,a.EDIT_MODE,function(e,t){e.editIdx=t,e.editMemo=e.todoList.filter(function(e){return e.id===t})[0].memo}),s(o,a.CTRL_STATUS,function(e,t){var n=t.id,o=t.status;e.todoList.filter(function(e){return e.id===n})[0].status=o}),s(o,"updateEditMemo",function(e,t){e.editMemo=t}),s(o,"resetMemo",function(e){e.editIdx=-1,e.editMemo=""}),s(o,"updateList",function(e,t){e.todoList=t}),o),actions:(r={},s(r,a.GET_LIST,function(e,t){var n=e.commit;u.default.get("http://localhost:3000/todoList/"+t).then(function(e){n("GET_LIST",e.data.todoList)})}),s(r,a.ADD_TODO,function(e,t){var n=this,o=e.commit;if(!t)return alert("no message input!");u.default.post("http://localhost:3000/todoList",{id:(new Date).getTime(),memo:t,status:"created"}).then(function(e){n.dispatch("GET_LIST")}),o("resetMemo")}),s(r,a.EDIT_TODO,function(e,t){var n=this;e.commit;u.default.put("http://localhost:3000/todoList/"+t.id,{id:t.id,memo:t.memo,status:"created"}).then(function(e){n.dispatch("GET_LIST"),n.dispatch("ADD_MODE",t.id)})}),s(r,a.DELETE_TODO,function(e,t){var n=this,o=(e.commit,e.state),r=o.todoList.filter(function(e){return"edit"===e.status});if(r.length>0)return alert("완료되지 않은 항목이 있습니다.");u.default.delete("http://localhost:3000/todoList/"+t).then(function(e){n.dispatch("GET_LIST")})}),s(r,a.EDIT_MODE,function(e,t){var n=e.commit,o=e.state,r=o.todoList.filter(function(e){return"edit"===e.status});if(r.length>0)return alert("완료되지 않은 항목이 있습니다.");n("EDIT_MODE",t),n("CTRL_STATUS",{id:t,status:"edit"})}),s(r,a.CTRL_STATUS,function(e,t){var n=this;e.commit;u.default.put("http://localhost:3000/todoList/"+t.id,{id:t.id,status:t.status,memo:t.memo}).then(function(e){n.dispatch("GET_LIST")})}),s(r,a.ADD_MODE,function(e,t){var n=e.commit;n("CTRL_STATUS",{id:t,status:"created"}),n("resetMemo")}),s(r,"updateList",function(e,t){var n=e.commit;n("updateList",t)}),r)};t.default=c},a88c:function(e,t,n){"use strict";n("4de4"),n("d81d"),n("a434"),n("e439"),n("b64b"),n("d3b7"),n("07ac"),n("e6cf"),n("1276"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(n("bc3a"));var o,r=i(n("dc59")),a=u(n("47e3"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={state:{movies:[],myHistory:[],pgvUser:null,pgvDate:"",pgvMovie:"",pgvMovieId:"",pgvTheatre:"",pgvMode:!1,pgvSeatList:[],pgvSelectedSeats:[],dialog:!1},getters:{availableDate:function(e){return e.movies.reduce(function(e,t){return e.indexOf(t.dateId)<0&&e.push(t.dateId),e},[])},filteredByDate:function(e){return e.movies.filter(function(t){return e.pgvMode?t.theatreId==e.pgvTheatre:t.dateId==e.pgvDate}).reduce(function(e,t){return e.indexOf(t.movieName)<0&&e.push(t.movieName),e},[])},filteredByMovie:function(e){return e.movies.filter(function(t){return e.pgvMode?t.theatreId==e.pgvTheatre:t.dateId==e.pgvDate}).filter(function(t){return t.movieName==e.pgvMovie}).shift()},availableTheatre:function(e){return e.movies.reduce(function(e,t){return e.indexOf(t.theatreId)<0&&e.push(t.theatreId),e},[]).sort()}},mutations:(o={},s(o,a.SET_MODE,function(e,t){e.pgvMode=t}),s(o,a.SET_MOVIE,function(e,t){e.movies=t}),s(o,a.SET_DATE,function(e,t){e.pgvDate=t}),s(o,a.SET_THEATRE,function(e,t){e.pgvTheatre=t}),s(o,a.SET_MOVIE_NAME,function(e,t){e.pgvMovie=t}),s(o,a.SET_MOVIE_ID,function(e,t){e.pgvMovieId=t}),s(o,a.SET_SEAT_LIST,function(e,t){e.pgvSeatList=t}),s(o,a.ADD_SELECTED_SEAT,function(e,t){var n=t.row,o=t.col;e.pgvSelectedSeats.push(n+"-"+o)}),s(o,a.REMOVE_SEAT,function(e,t){var n=t.row,o=t.col;e.pgvSelectedSeats.splice(e.pgvSelectedSeats.indexOf([n+"-"+o][0]),1)}),s(o,a.RESET_SELECTED_SEAT,function(e){e.pgvSelectedSeats=[]}),s(o,a.FETCH_HISTORY,function(e,t){e.myHistory=t}),s(o,a.CLOSE_DIALOG,function(e,t){e.dialog=t}),s(o,a.SET_MY_HISTORY,function(e,t){e.myHistory=t}),s(o,a.SET_USER,function(e,t){e.pgvUser=t}),o),actions:{getMovies:function(e,t){var n=e.commit,o=t.prop,a=t.val;console.log(o,a),r.default.collection("pgv").where(o,"==",a).get().then(function(e){var t=e.docs.map(function(e){var t=e.data();t.id=e.id;var n=new Date;return n.setTime(1e3*t.date.seconds),t.date=n.toISOString().split("T")[0],t});n("SET_MOVIE",t)})},setSeatBooked:function(e,t){var n=e.commit,o=t.movieId,r=t.userSeats,a=t.userId;n("setSeatBooked",{movieId:o,userSeats:r,userId:a})},getHistory:function(e){var t=e.commit,n=e.state;r.default.collection("pgv").get().then(function(e){var o=[];console.log(e),e.forEach(function(e){var t=e.data();t.id=e.id,o.push(t)});var r=o.reduce(function(e,t){var o=[];return Object.values(t.seats[0]).map(function(r){r.forEach(function(r){r==n.pgvUser&&o.indexOf(t.id)<0&&(o.push(t.id),e.push(t))})}),e},[]);t("SET_MY_HISTORY",r)}).catch(function(e){return console.log(e)})},checkSeatAvailable:function(e,t){e.commit;var n=e.state,o=t.row,a=t.col;return new Promise(function(e,t){r.default.collection("pgv").doc(n.pgvMovieId).get().then(function(t){e(0==Object.values(t.data().seats[0])[o][a])}).catch(function(e){return t(e)})})},getSeatList:function(e){var t=e.commit,n=e.state;r.default.collection("pgv").doc(n.pgvMovieId).get().then(function(e){t("SET_SEAT_LIST",e.data().seats[0])}).catch(function(e){return console.log(e)})},makeSeatReserved:function(e,t){e.commit;var n=e.state,o=[];o.push(t),r.default.collection("pgv").doc(n.pgvMovieId).update({seats:o}).then(function(){console.log("Document successfully updated!"),n.dialog=!0}).catch(function(e){console.error("Error updating document: ",e)})},createDataForUpdate:function(e){e.commit;var t=e.dispatch,n=e.state;if(0==n.pgvSelectedSeats.length)return!1;var o=JSON.parse(JSON.stringify(n.pgvSeatList));n.pgvSelectedSeats.forEach(function(e){var t=e.split("-"),r=t[0],a=t[1];o[r][a]=n.pgvUser}),t("makeSeatReserved",o)},createDataForDelete:function(e,t){var n=e.dispatch,o=e.state;JSON.parse(JSON.stringify(t.seats));if(t){var r=Object.keys(t.seats[0]).reduce(function(e,n){return e[n]=t.seats[0][n].map(function(e){return e==o.pgvUser&&(e=""),e}),e},{});n("makeSeatCanceled",{payload:r,id:t.id})}},makeSeatCanceled:function(e,t){e.commit,e.state;var n=e.dispatch,o=t.payload,a=t.id,u=[];u.push(o),console.log(u),r.default.collection("pgv").doc(a).update({seats:u}).then(function(){console.log("Document successfully updated!"),n("getHistory")}).catch(function(e){console.error("Error updating document: ",e)})}}};t.default=c},c0d6:function(e,t,n){"use strict";n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n("2b0e")),r=c(n("2f62")),a=c(n("bc3a")),u=c(n("dc59")),i=c(n("694e")),s=c(n("a88c"));function c(e){return e&&e.__esModule?e:{default:e}}o.default.use(r.default);var d=new r.default.Store({modules:{pgv:s.default,todos:i.default},state:{userList:[],user:null},getters:{getUser:function(e){return e.user}},mutations:{fetchUserList:function(e,t){e.userList=t},autoSignIn:function(e,t){e.user=t},setUser:function(e,t){e.user=t}},actions:{fetchUserList:function(e){var t=e.commit;a.default.get("https://reqres.in/api/users").then(function(e){t("fetchUserList",e.data.data)})},testFirebase:function(e){var t=e.commit;u.default.collection("pgv").get().then(function(e){e.forEach(function(e){console.log(JSON.stringify(e.data()));var t=new Date;t.setTime(1e3*e.data().date.seconds)})}),t("testFirebase",[])},addFirebase:function(e){e.commit;var t=e.state;u.default.collection("pgv").add(t.data).then(function(e){console.log("Document written with ID: ",e.id)}).catch(function(e){console.error("Error adding document: ",e)})},autoSignIn:function(e,t){var n=e.commit;n("autoSignIn",t)},logOut:function(e){var t=e.commit;t("setUser",null)}}});t.default=d},dc59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("8aa5"));function r(e){return e&&e.__esModule?e:{default:e}}n("e71f");var a={apiKey:"AIzaSyDo4X1RFYA9pagh7YpDjDwoUrKbBoPBTNo",authDomain:"my-pgv-d62d3.firebaseapp.com",databaseURL:"https://my-pgv-d62d3.firebaseio.com",projectId:"my-pgv-d62d3",storageBucket:"my-pgv-d62d3.appspot.com",messagingSenderId:"477328762955",appId:"1:477328762955:web:4bf1e0dec1927b51"},u=o.default.initializeApp(a),i=u.firestore();i.settings({timestampsInSnapshots:!0});var s=i;t.default=s},df3d:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-content",[n("router-view")],1)],1)},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})}});
//# sourceMappingURL=app.71f5c009.js.map